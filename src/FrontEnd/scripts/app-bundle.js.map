{"version":3,"sources":["about.js","app.js","environment.js","form.js","home.js","main.js","navigation.js","helpers/data-configuration.js","helpers/input-data-file-specification.js","helpers/nav-element.js","helpers/workout-file-uploader.js","resources/index.js","value_converters/file-input-value-converter.js","value_converters/file-name-value-converter.js"],"names":["About","configuraton","content","title","http","configure","config","withBaseUrl","apiUrl","activate","that","fetch","then","response","json","description","App","configureRouter","router","map","route","name","moduleId","message","activePage","SetActive","pageName","debug","testing","toastr","WorkoutAttributes","pulse","altitude","distance","cadence","FileInput","file","undefined","conflicts","priority","pick","$event","$","srcElement","siblings","click","addConflictedProperty","propertyName","toLowerCase","Form","of","controller","workoutFileUploader","person","Person","fileInputs","_controller","isDragover","_defineValidationRules","_initDropTarget","addFileInput","push","removeFile","index","findIndex","n","splice","submit","self","validate","result","length","priorityInfo","_constructPriorityInfo","files","fileInput","postFileAjax","alert","fail","data","conflictInfo","JSON","parse","conflict","fileIndex","i","f","containingFile","error","p","FileIndex","PriorityInfo","validateTrigger","blur","_dropFileHandler","e","preventDefault","originalEvent","dataTransfer","fileSpecification","isSatifiedBy","document","on","stopPropagation","bind","sex","weight","age","Sex","KilogramsWeight","Age","ensure","required","minLength","matches","Home","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","Navigation","home","about","form","_active","changeActive","navElement","deactivate","DataConfiguration","InputDataFileSpecification","_expectedExtencions","type","_isOfRequiredType","_hasRequiredExtenction","indexOf","endsWith","ex","NavElement","_isActive","WorkoutFileUploader","configuration","eventAggregator","FormData","deferred","jQuery","Deferred","append","stringify","prop","x","ajax","url","contentType","processData","success","Blob","documentElement","outerHTML","saveAs","resolve","xhr","status","err","reject","responseText","FileInputValueConverter","fromView","fileList","FileNameValueConverter","toView"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {HttpClient} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\nimport {DataConfiguration} from 'helpers/data-configuration';\r\n\r\n@inject(DataConfiguration)\r\nexport class About {\r\n    constructor(configuraton) {\r\n        this.content = \"\";\r\n        this.title = \"\";\r\n\r\n        this.http = new HttpClient().configure(config => {\r\n            config.withBaseUrl(configuraton.apiUrl);\r\n        });\r\n    }\r\n\r\n    activate() {\r\n        var that = this;\r\n        this.http.fetch('/api/StaticPage/about')\r\n            .then(response => response.json())\r\n            .then(content => {\r\n                that.title= content.title;\r\n                that.content = content.description;\r\n            });\r\n    }\r\n\r\n}","import {computedFrom} from 'aurelia-framework';\r\n\r\nexport class App {\r\n    configureRouter(config, router) {\r\n        this.router = router;\r\n        config.title = 'Single workout';\r\n        config.map([\r\n          { route: '', name: 'home', moduleId: 'home' },\r\n          { route: '/about', name: 'about', moduleId: 'about' },\r\n          { route: '/form', name: 'form', moduleId: 'form' }\r\n        ]);\r\n    }\r\n\r\n    constructor() {\r\n        this.message = 'Hello World!';\r\n        this.name = \"name\";\r\n        this.activePage = 'home';\r\n    }\r\n    \r\n    @computedFrom(\"activePage\")\r\n    get Active() {\r\n        return this.activePage;\r\n    }\r\n\r\n    SetActive(pageName) {\r\n        this.activePage = pageName;\r\n        return true;\r\n    }\r\n}\r\n\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import { inject, NewInstance, computedFrom } from 'aurelia-framework';\r\nimport { ValidationController, ValidationRules, validateTrigger } from 'aurelia-validation';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { WorkoutFileUploader } from 'helpers/workout-file-uploader';\r\nimport { InputDataFileSpecification } from 'helpers/input-data-file-specification';\r\nimport * as toastr from 'toastr/toastr';\r\n\r\nclass WorkoutAttributes {\r\n    constructor(pulse, altitude, distance, cadence) {\r\n        this.pulse = pulse;\r\n        this.altitude = altitude;\r\n        this.distance = distance;\r\n        this.cadence = cadence;\r\n    }\r\n}\r\n\r\nclass FileInput {\r\n    constructor(file = undefined) {\r\n        this.file = file;\r\n\r\n        this.conflicts = new WorkoutAttributes(false, false, false, false);\r\n        this.priority = new WorkoutAttributes(false, false, false, false);\r\n    }\r\n\r\n    pick($event) {\r\n        $($event.srcElement).siblings(\"input[type='file']\").click();\r\n    }\r\n\r\n    addConflictedProperty(propertyName) {\r\n        this.conflicts[propertyName.toLowerCase()] = true\r\n    }\r\n}\r\n\r\n@inject(NewInstance.of(ValidationController), WorkoutFileUploader, toastr)\r\nexport class Form {\r\n    constructor(controller, workoutFileUploader, toastr) {\r\n        this.name = \"\";\r\n        this.person = new Person('MALE', 75, 25);\r\n        this.toastr = toastr;\r\n\r\n        this.fileInputs = [];\r\n        this._controller = controller;\r\n        this.workoutFileUploader = workoutFileUploader;\r\n        this.isDragover = false;\r\n\r\n        this._defineValidationRules();\r\n        this._initDropTarget();\r\n    }\r\n\r\n    addFileInput() {\r\n        this.fileInputs.push(new FileInput());\r\n    }\r\n\r\n    removeFile(file) {\r\n        let index = this.fileInputs.findIndex(n => n === file);\r\n        this.fileInputs.splice(index, 1);\r\n    }\r\n\r\n    submit() {\r\n        let self = this;\r\n        this._controller.validate().then((result) => {\r\n            if (result.length > 0) {\r\n                return;\r\n            }\r\n            var priorityInfo = this._constructPriorityInfo();\r\n            let files = this.fileInputs.map(fileInput => fileInput.file);\r\n            this.workoutFileUploader.postFileAjax(files, this.name, this.person, priorityInfo)\r\n                .then(function () {\r\n                    alert('sukces');\r\n                }).fail((data) => {\r\n                    let conflictInfo = JSON.parse(data),\r\n                        conflict,\r\n                        fileIndex;\r\n                    for (let i in conflictInfo) {\r\n                        conflict = conflictInfo[i];\r\n                        for (let f in conflict.containingFile) {\r\n                            fileIndex = conflict.containingFile[f];\r\n                            self.fileInputs[fileIndex].addConflictedProperty(conflict.propertyName);\r\n                        }\r\n                    }\r\n\r\n                    this.toastr.error(\"There are conflicts\");\r\n                });\r\n        });\r\n    }\r\n\r\n    _constructPriorityInfo() {\r\n        let file,\r\n            result = [],\r\n            priorityInfo;\r\n        for (let i in this.fileInputs) {\r\n            priorityInfo = [];\r\n            file = this.fileInputs[i];\r\n            for (let p in file.priority) {\r\n                if (file.priority[p] === \"on\") {\r\n                    priorityInfo.push(p);\r\n                }\r\n            }\r\n            result.push({ FileIndex: i, PriorityInfo: priorityInfo });\r\n        }\r\n        return result;\r\n    }\r\n\r\n    _defineValidationRules() {\r\n        this._controller.validateTrigger = validateTrigger.blur;\r\n    }\r\n\r\n    _dropFileHandler(e) {\r\n        e.preventDefault();\r\n        if (e.originalEvent && e.originalEvent.dataTransfer) {\r\n            let fileSpecification = new InputDataFileSpecification();\r\n            for (let file in e.originalEvent.dataTransfer.files) {\r\n                file = e.originalEvent.dataTransfer.files[file];\r\n                if (fileSpecification.isSatifiedBy(file)) {\r\n                    this.fileInputs\r\n                        .push(new FileInput(file));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    _initDropTarget() {\r\n        let that = this;\r\n        $(document).on('drag dragstart dragend dragover dragenter dragleave drop',\r\n            '.upload-file-cnt', function (e) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            })\r\n            .on('dragover dragenter', '.upload-file-cnt', () => that.isDragover = true)\r\n            .on('dragleave dragend drop', '.upload-file-cnt', () => that.isDragover = false)\r\n            .on('drop', '.upload-file-cnt', this._dropFileHandler.bind(this));\r\n    }\r\n}\r\n\r\nexport class Person {\r\n    Sex;\r\n    KilogramsWeight;\r\n    Age;\r\n    constructor(sex, weight, age) {\r\n        this.Sex = sex;\r\n        this.KilogramsWeight = weight;\r\n        this.Age = age;\r\n    }\r\n};\r\n\r\nValidationRules.ensure('name').required().minLength(3).on(Form);\r\n\r\nValidationRules\r\n    .ensure('Age').required().minLength(2)\r\n    .ensure('KilogramsWeight').required().minLength(2)\r\n    .ensure('Sex').required().matches(/MALE|FAMALE/)\r\n    .on(Person);\r\n","export class Home {\r\n    constructor() {\r\n        \r\n    }\r\n}","import environment from './environment';\r\n\r\n//Configure Bluebird Promises.\r\n//Note: You may want to use environment-specific configuration.\r\nPromise.config({\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n    aurelia.use\r\n        .standardConfiguration()\r\n        .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n      aurelia.use\r\n          .plugin('aurelia-testing')\r\n          .plugin('aurelia-validation');\r\n  }\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n","import {NavElement} from 'helpers/nav-element';\r\n\r\nexport class Navigation {\r\n    constructor() {\r\n        this.home = new NavElement(\"Home\");\r\n        this.about = new NavElement(\"About\");\r\n        this.form = new NavElement(\"Upload\");\r\n        this._active = this.home;\r\n    }\r\n\r\n    changeActive(navElement) {\r\n        this._active.deactivate();\r\n        navElement.activate();\r\n        this._active = navElement;\r\n        return true;\r\n    }\r\n}","export class DataConfiguration {\r\n    constructor() {\r\n        this.apiUrl = \"http://localhost:64973\";\r\n        //this.apiUrl = \"https://workoutcombiner.azurewebsites.net\";\r\n    }\r\n}","export class InputDataFileSpecification {\r\n    constructor() {\r\n        this._expectedExtencions = [\"tcx\", \"gpx\"];\r\n    }\r\n\r\n    isSatifiedBy(file) {\r\n        \r\n        if (file == null) {\r\n            return false;\r\n        }\r\n        \r\n        if (file.name === undefined && file.type === undefined) {\r\n            return false;\r\n        }\r\n\r\n        if (file.type && file.type !== \"\") {\r\n            return this._isOfRequiredType(file);\r\n        } else {\r\n            return this._hasRequiredExtenction(file);\r\n        }\r\n    }\r\n\r\n    _isOfRequiredType(file) {\r\n        return this._expectedExtencions.indexOf(file.type) !== -1;\r\n    }\r\n\r\n    _hasRequiredExtenction(file) {\r\n        return this._expectedExtencions.findIndex(ex => file.name.endsWith(ex)) !== -1;\r\n    }\r\n}","import {computedFrom} from 'aurelia-framework';\r\n\r\nexport class NavElement {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this._isActive = false;\r\n    }\r\n\r\n    @computedFrom(\"_isActive\")\r\n    get isActiveClass() {\r\n        return this._isActive ? 'active' : '';\r\n    }\r\n\r\n    deactivate() {\r\n        this._isActive = false;\r\n    }\r\n\r\n    activate() {\r\n        this._isActive = true;\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {DataConfiguration} from 'helpers/data-configuration';\r\n\r\n@inject(DataConfiguration, EventAggregator)\r\nexport class WorkoutFileUploader {\r\n    constructor(configuration, eventAggregator) {\r\n        this.configuration = configuration;\r\n        this.eventAggregator = eventAggregator;\r\n    }\r\n\r\n    postFileAjax(files, name, person, priority) {\r\n        let data = new FormData(),\r\n            that = this,\r\n            deferred = jQuery.Deferred();\r\n\r\n        data.append(\"model.Name\", name);\r\n        data.append(\"model.Priority\", JSON.stringify(priority));\r\n\r\n        for(var prop in person){\r\n            data.append(\"model.\" + prop, person[prop]);\r\n        }\r\n\r\n        for (let x = 0; x < files.length; x++){\r\n            data.append(files[x].name, files[x]);\r\n        }\r\n\r\n\r\n        $.ajax({\r\n            type: \"post\",\r\n            url: this.configuration.apiUrl + '/api/Merge',\r\n            contentType: false,\r\n            processData: false,\r\n            data: data,\r\n            success: function(response) {\r\n                var data = new Blob([response.documentElement.outerHTML], {type: 'text/xml'});\r\n                saveAs(data, name + '.tcx');\r\n                deferred.resolve();\r\n            },\r\n            error: function (xhr, status, err) {\r\n                deferred.reject(xhr.responseText);\r\n            }\r\n        });\r\n\r\n        return deferred;\r\n    }\r\n}","export function configure(config) {\r\n  //config.globalResources([]);\r\n}\r\n","export class FileInputValueConverter{\r\n    fromView(fileList) {\r\n        if (fileList[0]) {\r\n            return fileList[0];\r\n        }\r\n    }\r\n}","export class FileNameValueConverter {\r\n    toView(file) {\r\n        if (file) {\r\n            return file.name;\r\n        }\r\n        return \"...\";\r\n    }\r\n}"],"sourceRoot":"../src"}